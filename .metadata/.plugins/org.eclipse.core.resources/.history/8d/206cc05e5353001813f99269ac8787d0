projectDetails={}
//projectDetails.appname='peakaboo';
//projectDetails.restappname='peakaboo-service';
//projectDetails.url="http://18.191.20.120:8080/"
projectDetails.appname='papi-ui';
projectDetails.restappname='papi';
projectDetails.url="http://localhost:9090/"
userDetails={};
userDetails.user={};
userDetails.user.name='Praveen';
userDetails.user.id=2;
userDetails.user.role='end_user';

groupDetails={};
groupDetails.groups=[];
groupDetails.group={};
groupDetails.group.name='PRO-Group-one'
groupDetails.group.id=1;
$(document).ready(function(){
    $("#usr-btn").click(function(){
        $(".main-div").load("user_registration.html");
    });
    var loginDetails={
    		username:'Praveen Shet G',
    		userid:1,
    		groupid:1,
    		permissions:{}
    }
});


function scrollToBottom(wrapper_div_id,element_id) {
    var message = jQuery('#'+wrapper_div_id);
    var newMessage = message.children('div:last-child');
    
    var clientHeight = message.innerHeight();
    var scrollTop = message.prop('scrollTop');
    var scrollHeight = message.prop('scrollHeight');
    
    var newMessageHeight = newMessage.innerHeight();
    var lastMessageHeight = newMessage.prev().innerHeight();
    if(lastMessageHeight + newMessageHeight + clientHeight + scrollTop >= scrollHeight) {
        message.scrollTop(scrollHeight);
    }
 }

function scrollSmoothToBottom (id) {
	   var div = document.getElementById(id);
	   $('#' + id).animate({
	      scrollTop: div.scrollHeight - div.clientHeight
	   }, 200);
	}

function loginCheck(username, password){
		$(".spinner").show();
		const promise = new Promise((resolve, reject) => {
			data = '{"oEmail":"'
				+ $("#fName").val()
				+ '","password":"'
				+ $("#lName").val()
			$.ajax({
				  method: "POST",
				  url: projectDetails.url+""+projectDetails.restappname+"/auth/login",
				  contentType: "application/json",
				  data: '{"oEmail":"'+$("#pw_grp_name").val()+'"}'
				}).done(function( msg ) {
					showSnackBar("Group Created Successfully !!!")
				  //  alert( "Data Saved: " + msg );
				  getGroupList();
					//paginateTable("grp-table",5);
				});
			  const request = new XMLHttpRequest();

			  request.open('POST', 'https://api.icndb.com/jokes/random');
			  request.onload = () => {
			    if (request.status === 200) {
			      resolve(request.response); // we got data here, so resolve the Promise
			    } else {
			      reject(Error(request.statusText)); // status is not 200 OK, so reject
			    }
			  };

			  request.onerror = () => {
			    reject(Error('Error fetching data.')); // error occurred, reject the  Promise
			  };

			  request.send(); // send the request
			});

			console.log('Asynchronous request made.');

			promise.then((data) => {
			  console.log('Got data! Promise fulfilled.');
			  document.body.textContent = JSON.parse(data).value.joke;
			}, (error) => {
			  console.log('Promise rejected.');
			  console.log(error.message);
			});
		if(username=='praveen'){
			userDetails.user.name='Praveen';
			userDetails.user.id=2;
			userDetails.user.role='end_user';
			groupDetails.group.name='PROAWITZ-GROUP-PEAKABOO'
			groupDetails.group.id=1;
		}else{
			userDetails.user.name='Admin';
			userDetails.user.id=1;
			userDetails.user.role='admin';
			groupDetails.group.name='PROAWITZ-GROUP-PEAKABOO'
			groupDetails.group.id=1;
		}
		processLogin(username);
		$(".spinner").hide();
	/*	$.ajax({
			method : "POST",
			url : projectDetails.url + ""+projectDetails.restappname+"/user/validateUser",
			contentType : "application/json"
		}).done(function(response) {
			// alert( "success" );
			$(".spinner").hide();
			
			//showSnackBar("Loading Group List...")
			//createDynamiTable(groupList, "showData");
			//paginateTable("grp-table", 5);
			//$(".spinner").hide();
			// return groupList;
		}).fail(function(){
			$(".spinner").hide();
		})*/
	
}
 function rand() {
    return Math.random().toString(36).substr(2); // remove `0.`
};
function generateRandomToken() {
    return rand() + rand()+ rand(); // to make it longer
};

function processLogin(username){
	$("#menu-list").load("view/common/side_menu.html");
	$(".nav").show();
	$("#main-content").load("view/home.html");
	//$("#main-content").load("");	
	let token = shuffelWord(generateRandomToken()+username);
	console.log(token)
	
}


function setView(url){
	$("#main-content").load(url+".html");
	return;
}